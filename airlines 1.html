<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Airline Booking Demo (Single HTML File)</title>
  <style>
    :root{
      --bg:#0b1020; --panel:#0e1630; --muted:#9fb0ca; --ink:#e6eef8; --primary:#3b82f6; --accent:#22d3ee; --ok:#10b981; --warn:#f59e0b; --danger:#ef4444;
      --border:rgba(255,255,255,0.08);
    }
    *{box-sizing:border-box}
    body{margin:0;background:radial-gradient(1200px 600px at 20% -20%, #1d2b56 0%, #0b1020 40%), #0b1020;color:var(--ink);font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,Arial;}
    header{position:sticky;top:0;z-index:5;background:linear-gradient(180deg, rgba(14,22,48,.85), rgba(14,22,48,.6));backdrop-filter: blur(6px);}
    .nav{max-width:1100px;margin:0 auto;display:flex;align-items:center;gap:14px;padding:14px 16px;border-bottom:1px solid var(--border)}
    .logo{width:40px;height:40px;border-radius:12px;background:linear-gradient(135deg,var(--primary),var(--accent));display:grid;place-items:center;font-weight:800}
    .brand h1{margin:0;font-size:18px;letter-spacing:.3px}
    .tabs{margin-left:auto;display:flex;gap:8px}
    .tab{padding:8px 12px;border:1px solid var(--border);border-radius:999px;background:transparent;color:var(--ink);cursor:pointer;font-weight:600}
    .tab.active{background:var(--primary)}main{max-width:1100px;margin:16px auto;padding:0 16px 40px}

.search{display:grid;gap:12px;padding:16px;background:linear-gradient(180deg,rgba(255,255,255,0.03),rgba(255,255,255,0.0));border:1px solid var(--border);border-radius:16px}
.row{display:grid;grid-template-columns:repeat(12,1fr);gap:10px}
.field{grid-column:span 3;background:rgba(255,255,255,.02);border:1px solid var(--border);padding:10px;border-radius:12px}
.field label{display:block;font-size:12px;color:var(--muted);margin-bottom:6px}
.field input,.field select{width:100%;padding:10px;border-radius:8px;border:1px solid var(--border);background:transparent;color:var(--ink)}
.actions{display:flex;gap:10px;align-items:end}
.btn{padding:12px 14px;border-radius:10px;border:1px solid var(--border);background:transparent;color:var(--ink);font-weight:700;cursor:pointer}
.btn.primary{background:var(--primary);border-color:transparent}
.btn.ghost{background:transparent}

.panels{display:grid;grid-template-columns:280px 1fr;gap:16px;margin-top:18px}

.card{background:linear-gradient(0deg,rgba(255,255,255,.02),rgba(255,255,255,.01));border:1px solid var(--border);border-radius:16px;padding:14px}
.card h3{margin:0 0 10px 0;font-size:14px;color:var(--muted);letter-spacing:.4px}

.filters .line{display:flex;justify-content:space-between;align-items:center;margin:8px 0}
.switch{position:relative;display:inline-block;width:40px;height:20px}
.switch input{opacity:0;width:0;height:0}
.slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background:#334;transition:.2s;border-radius:999px}
.slider:before{content:"";position:absolute;height:16px;width:16px;left:2px;bottom:2px;background:white;transition:.2s;border-radius:50%}
.switch input:checked + .slider{background:var(--ok)}
.switch input:checked + .slider:before{transform:translateX(20px)}

.results{display:grid;gap:12px}
.result{display:grid;grid-template-columns:1fr auto;gap:12px;padding:12px;border:1px solid var(--border);border-radius:14px;background:rgba(255,255,255,.02)}
.result .info{display:flex;gap:14px;align-items:center}
.pill{font-size:12px;border:1px solid var(--border);padding:4px 8px;border-radius:999px;color:var(--muted)}
.airline{font-weight:800}
.money{font-size:20px;font-weight:900}
.muted{color:var(--muted)}

.empty{padding:18px;text-align:center;color:var(--muted)}

/* modal */
.modal{position:fixed;inset:0;background:rgba(0,0,0,.5);display:none;align-items:center;justify-content:center;padding:16px}
.modal .sheet{max-width:720px;width:100%;background:var(--panel);border:1px solid var(--border);border-radius:18px;padding:16px}
.sheet h2{margin:0 0 8px 0}
.grid{display:grid;grid-template-columns:repeat(12,1fr);gap:10px}
.grid .field{grid-column:span 6}

.seats{display:grid;grid-template-columns: 40px repeat(6,1fr);gap:6px;margin-top:10px}
.seat{padding:10px 0;border:1px solid var(--border);border-radius:8px;text-align:center;cursor:pointer}
.seat.taken{background:#2a334d;color:#7c8aa5;cursor:not-allowed}
.seat.selected{outline:2px solid var(--accent)}

.trips .trip{padding:12px;border:1px solid var(--border);border-radius:12px;margin-bottom:10px}

footer{max-width:1100px;margin:20px auto 50px;padding:0 16px;color:var(--muted);font-size:13px}

@media (max-width: 920px){
  .panels{grid-template-columns:1fr}
  .row .field{grid-column:span 6}
}
@media (max-width: 560px){
  .row .field{grid-column:span 12}
}

  </style>
</head>
<body>
  <header>
    <div class="nav">
      <div class="logo">✈️</div>
      <div class="brand">
        <h1>SkyFly — Airline Booking Demo</h1>
      </div>
      <div class="tabs">
        <button class="tab active" data-tab="book">Book</button>
        <button class="tab" data-tab="trips">My Trips</button>
      </div>
    </div>
  </header>  <main>
    <section id="book" class="page">
      <div class="search">
        <div class="row">
          <div class="field"><label>Trip</label>
            <select id="tripType">
              <option value="oneway">One-way</option>
              <option value="round">Round-trip</option>
            </select>
          </div>
          <div class="field"><label>From</label>
            <select id="from">
              <option value="DEL">Delhi (DEL)</option>
              <option value="BOM">Mumbai (BOM)</option>
              <option value="BLR">Bengaluru (BLR)</option>
              <option value="HYD">Hyderabad (HYD)</option>
              <option value="MAA">Chennai (MAA)</option>
              <option value="CCU">Kolkata (CCU)</option>
            </select>
          </div>
          <div class="field"><label>To</label>
            <select id="to">
              <option value="BOM">Mumbai (BOM)</option>
              <option value="DEL">Delhi (DEL)</option>
              <option value="BLR">Bengaluru (BLR)</option>
              <option value="HYD">Hyderabad (HYD)</option>
              <option value="MAA">Chennai (MAA)</option>
              <option value="CCU">Kolkata (CCU)</option>
            </select>
          </div>
          <div class="field"><label>Depart</label>
            <input id="depart" type="date" />
          </div>
        </div>
        <div class="row">
          <div class="field" id="returnWrap"><label>Return</label>
            <input id="return" type="date" disabled />
          </div>
          <div class="field"><label>Passengers</label>
            <select id="pax">
              <option>1</option><option>2</option><option>3</option><option>4</option>
            </select>
          </div>
          <div class="field"><label>Cabin</label>
            <select id="cabin">
              <option>Economy</option><option>Premium Economy</option><option>Business</option>
            </select>
          </div>
          <div class="actions" style="grid-column:span 3;justify-content:flex-end">
            <button id="swap" class="btn ghost" title="Swap">⇄ Swap</button>
            <button id="searchBtn" class="btn primary">Search Flights</button>
          </div>
        </div>
      </div><div class="panels">
    <aside class="card filters">
      <h3>Filters</h3>
      <div class="line"><span>Non-stop only</span>
        <label class="switch"><input id="nonstop" type="checkbox" /><span class="slider"></span></label>
      </div>
      <div class="line" style="flex-direction:column;align-items:stretch;gap:6px">
        <label for="airlineFilter" class="muted">Airline</label>
        <select id="airlineFilter">
          <option value="all">All airlines</option>
          <option>IndiGo</option><option>Air India</option><option>Vistara</option><option>SpiceJet</option><option>Akasa Air</option>
        </select>
      </div>
      <div class="line" style="flex-direction:column;gap:6px">
        <label class="muted">Sort by</label>
        <select id="sortBy">
          <option value="price">Lowest price</option>
          <option value="duration">Shortest duration</option>
          <option value="depart">Earliest depart</option>
        </select>
      </div>
    </aside>

    <section class="card">
      <h3>Results</h3>
      <div id="results" class="results"></div>
      <div id="noResults" class="empty" style="display:none">No flights. Try different dates or routes.</div>
    </section>
  </div>
</section>

<section id="trips" class="page" style="display:none">
  <div class="card trips">
    <h3>My Trips</h3>
    <div id="tripsList"></div>
    <div id="noTrips" class="empty">No bookings yet.</div>
  </div>
</section>

  </main>  <div class="modal" id="modal">
    <div class="sheet">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <h2>Passenger & Seat</h2>
        <button id="closeModal" class="btn">✕</button>
      </div>
      <div id="chosen" class="muted" style="margin-bottom:10px"></div><div class="grid">
    <div class="field"><label>Full name</label><input id="passengerName" placeholder="e.g., A. Sharma" /></div>
    <div class="field"><label>Email</label><input id="passengerEmail" placeholder="you@example.com" /></div>
  </div>

  <h3 style="margin:12px 0 6px">Seat selection</h3>
  <div id="seats" class="seats"></div>

  <div style="display:flex;justify-content:flex-end;gap:10px;margin-top:12px">
    <button id="confirm" class="btn primary">Confirm Booking</button>
  </div>
</div>

  </div>  <footer>
    Single-file demo for learning purposes only. No real prices or availability.
  </footer><script>
(function(){
  const airlines = ["IndiGo","Air India","Vistara","SpiceJet","Akasa Air"];
  const KEY_BOOKINGS = 'skyfly_bookings_v1';
  const $ = (sel,root=document)=>root.querySelector(sel);
  const $$ = (sel,root=document)=>Array.from(root.querySelectorAll(sel));

  // Tabs
  $$('.tab').forEach(btn=>btn.addEventListener('click',()=>{
    $$('.tab').forEach(b=>b.classList.remove('active')); btn.classList.add('active');
    const tab = btn.dataset.tab; $$('.page').forEach(p=>p.style.display = p.id===tab? '': 'none');
    if(tab==='trips') renderTrips();
  }));

  // trip type toggles return date
  const tripType = $('#tripType');
  const returnInput = $('#return');
  tripType.addEventListener('change', ()=>{
    const isRound = tripType.value==='round';
    returnInput.disabled = !isRound; if(!isRound) returnInput.value='';
  });

  // default dates: today + 3
  const today = new Date();
  const d = new Date(today.getFullYear(), today.getMonth(), today.getDate()+3);
  $('#depart').valueAsDate = d;

  // swap from/to
  $('#swap').addEventListener('click',()=>{
    const a = $('#from'), b = $('#to');
    const tmp = a.value; a.value = b.value; b.value = tmp;
  });

  // search
  $('#searchBtn').addEventListener('click',()=> search());

  // filters
  $('#nonstop').addEventListener('change',()=> renderResults(window._lastResults||[]));
  $('#airlineFilter').addEventListener('change',()=> renderResults(window._lastResults||[]));
  $('#sortBy').addEventListener('change',()=> renderResults(window._lastResults||[]));

  function search(){
    const route = {from: $('#from').value, to: $('#to').value};
    if(route.from === route.to){ alert('Origin and destination must differ.'); return; }
    const depart = $('#depart').value; if(!depart){ alert('Pick a depart date'); return; }
    const pax = +$('#pax').value, cabin = $('#cabin').value;
    const isRound = tripType.value==='round';
    if(isRound && !$('#return').value){ alert('Pick a return date'); return; }

    // create deterministic-ish mock flights
    const results = mockFlights(route.from, route.to, depart, pax, cabin, isRound);
    window._lastSearch = {route, depart, pax, cabin, isRound, ret: $('#return').value};
    window._lastResults = results;
    renderResults(results);
  }

  function mockFlights(from,to,date,pax,cabin,isRound){
    const base = (from.charCodeAt(0)+to.charCodeAt(0)) * 17 + new Date(date).getDate();
    const rng = mulberry32(base);
    const n = 6 + Math.floor(rng()*5);
    const items = [];
    for(let i=0;i<n;i++){
      const airline = airlines[Math.floor(rng()*airlines.length)];
      const departH = 5 + Math.floor(rng()*16); // 05:00 - 21:00
      const departM = [0,15,30,45][Math.floor(rng()*4)];
      const durationMin = 60 + Math.floor(rng()*180); // 1h - 4h
      const stops = rng()>0.75 ? 1 : 0;
      const priceBase = 2200 + Math.floor(rng()*4500);
      const cabinMul = cabin==='Business'? 2.4 : cabin==='Premium Economy'? 1.4 : 1;
      const price = Math.round(priceBase * cabinMul * (stops? 0.9 : 1));
      const departTime = timeFmt(departH, departM);
      const arrive = addMinutes({h: departH, m: departM}, durationMin + (stops? 45:0));
      items.push({
        id: `${from}${to}${date}-${i}`,
        airline, from, to, date,
        depart: departTime,
        arrive: timeFmt(arrive.h, arrive.m),
        duration: durationMin + (stops?45:0),
        stops,
        price,
        cabin
      });
    }
    return items;
  }

  function renderResults(list){
    const nonstop = $('#nonstop').checked; const af = $('#airlineFilter').value;
    let filtered = list.filter(x=>(!nonstop || x.stops===0) && (af==='all' || x.airline===af));
    const sortBy = $('#sortBy').value;
    filtered.sort((a,b)=> sortBy==='price'? a.price-b.price : sortBy==='duration'? a.duration-b.duration : strTimeToMin(a.depart)-strTimeToMin(b.depart));

    const wrap = $('#results'); wrap.innerHTML = '';
    $('#noResults').style.display = filtered.length? 'none':'block';

    filtered.forEach(item=>{
      const card = document.createElement('div'); card.className = 'result';
      const info = document.createElement('div'); info.className = 'info';
      info.innerHTML = `
        <span class="pill airline">${item.airline}</span>
        <div>
          <div><strong>${item.from}</strong> ${item.depart} → <strong>${item.to}</strong> ${item.arrive}</div>
          <div class="muted">${fmtDuration(item.duration)} • ${item.stops? '1 stop' : 'Non‑stop'} • ${item.cabin}</div>
        </div>`;
      const actions = document.createElement('div');
      actions.style.display='grid'; actions.style.placeItems='end'; actions.style.gap='6px';
      const money = document.createElement('div'); money.className='money'; money.textContent = `₹${item.price.toLocaleString()}`;
      const btn = document.createElement('button'); btn.className='btn primary'; btn.textContent='Select';
      btn.addEventListener('click', ()=> openModal(item));
      actions.appendChild(money); actions.appendChild(btn);

      card.appendChild(info); card.appendChild(actions);
      wrap.appendChild(card);
    });
  }

  // Modal + seats
  let selectedSeat = null; let currentFlight = null;
  function openModal(item){
    currentFlight = item; selectedSeat = null;
    $('#chosen').textContent = `${item.airline} • ${item.from} ${item.depart} → ${item.to} ${item.arrive} • ${fmtDuration(item.duration)} • ₹${item.price.toLocaleString()}`;
    renderSeats();
    $('#passengerName').value=''; $('#passengerEmail').value='';
    $('#modal').style.display='flex';
  }
  $('#closeModal').addEventListener('click', ()=> $('#modal').style.display='none');

  function renderSeats(){
    const seats = $('#seats'); seats.innerHTML='';
    const cols = ['A','B','C','D','E','F'];
    // header row
    seats.appendChild(tag('div',''));
    cols.forEach(c=> seats.appendChild(tag('div',c, 'muted')));
    const takenSet = new Set(); // simple deterministic taken seats
    const r = mulberry32((currentFlight?.id||'').split('').reduce((a,c)=>a+c.charCodeAt(0),0));
    for(let i=0;i<Math.floor(10*r())+10;i++){ takenSet.add(`${Math.floor(r()*20)+1}${cols[Math.floor(r()*6)]}`); }

    for(let row=1; row<=20; row++){
      seats.appendChild(tag('div', String(row).padStart(2,'0'), 'muted'));
      cols.forEach(col=>{
        const code = `${row}${col}`;
        const d = tag('div', code, 'seat');
        d.classList.add('seat');
        if(takenSet.has(code)) d.classList.add('taken');
        d.addEventListener('click', ()=>{
          if(d.classList.contains('taken')) return;
          $$('.seat.selected', seats).forEach(x=>x.classList.remove('selected'));
          d.classList.add('selected'); selectedSeat = code;
        });
        seats.appendChild(d);
      });
    }
  }

  $('#confirm').addEventListener('click',()=>{
    const name = $('#passengerName').value.trim();
    const email = $('#passengerEmail').value.trim();
    if(!name || !email){ alert('Enter name and email'); return; }
    if(!selectedSeat){ alert('Pick a seat'); return; }
    const pnr = makePNR();
    const booking = {pnr, flight: currentFlight, name, email, seat: selectedSeat, ts: Date.now()};
    const all = loadBookings(); all.unshift(booking); saveBookings(all);
    $('#modal').style.display='none';
    // switch to trips
    document.querySelector('.tab[data-tab="trips"]').click();
    alert(`Booking confirmed! PNR: ${pnr}`);
  });

  function renderTrips(){
    const list = $('#tripsList'); list.innerHTML='';
    const all = loadBookings();
    $('#noTrips').style.display = all.length? 'none':'block';
    all.forEach(b=>{
      const div = document.createElement('div'); div.className='trip';
      div.innerHTML = `<div style="display:flex;justify-content:space-between;gap:8px;align-items:center">
        <div>
          <div><strong>${b.flight.airline}</strong> • ${b.flight.from} ${b.flight.depart} → ${b.flight.to} ${b.flight.arrive} • ${fmtDuration(b.flight.duration)}</div>
          <div class="muted">PNR ${b.pnr} • Seat ${b.seat} • ${new Date(b.ts).toLocaleString()}</div>
        </div>
        <div style="display:grid;gap:6px;place-items:end">
          <div class="money">₹${b.flight.price.toLocaleString()}</div>
          <button class="btn" data-pnr="${b.pnr}">Cancel</button>
        </div>
      </div>`;
      $('button[data-pnr]', div).addEventListener('click',()=>{
        if(!confirm('Cancel this trip?')) return;
        const rest = loadBookings().filter(x=>x.pnr!==b.pnr); saveBookings(rest); renderTrips();
      });
      list.appendChild(div);
    });
  }

  // helpers
  function fmtDuration(min){ const h=Math.floor(min/60), m=min%60; return `${h}h ${String(m).padStart(2,'0')}m`; }
  function timeFmt(h,m){ return `${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}`; }
  function addMinutes(t, mins){ let m=t.m+mins; let h=(t.h + Math.floor(m/60))%24; m%=60; return {h,m}; }
  function strTimeToMin(s){ const [h,m]=s.split(':').map(Number); return h*60+m; }
  function mulberry32(a){ return function(){ let t = a += 0x6D2B79F5; t = Math.imul(t ^ t >>> 15, t | 1); t ^= t + Math.imul(t ^ t >>> 7, t | 61); return ((t ^ t >>> 14) >>> 0) / 4294967296; } }
  function makePNR(){ const chars='ABCDEFGHJKLMNPQRSTUVWXYZ23456789'; let s=''; for(let i=0;i<6;i++) s+=chars[Math.floor(Math.random()*chars.length)]; return s; }
  function loadBookings(){ try{return JSON.parse(localStorage.getItem(KEY_BOOKINGS))||[]}catch(e){return[]} }
  function saveBookings(arr){ localStorage.setItem(KEY_BOOKINGS, JSON.stringify(arr)); }

})();
</script></body>
</html>